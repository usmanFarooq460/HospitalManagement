<div class="container-fluid">
    <page-title [heading]="'Def New Drug'" [icon]="'mdi mdi-account-multiple'"></page-title>
    <button class="btn blue-color focused-button text-white btn-sm" routerLink="/pharmacy/def-drug-type">def drug
        Type</button>
</div>

<div class="form">
    <form [formGroup]="formData">
        <div class="row">

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="drugName" placeholder="Drug Name" />
                <div *ngIf="form.drugName.invalid && form.drugName.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.drugName.errors.required" class="invalid-feedback d-block">
                        Drug Name is Req uired
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <select class="custom-form-control" name="drugType" id="drugType" formControlName="drugType">
                    <option value="null">Select Drug Type</option>
                    <option value="{{item._id}}" *ngFor="let item of drugTypeList">{{item.drugType}}</option>
                </select>
                <div *ngIf="form.drugType.invalid && form.drugType.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.drugType.errors.required" class="invalid-feedback d-block">
                        Drug Type is Required
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="drugCode" placeholder="Drug code" />
                <div *ngIf="form.drugCode.invalid && form.drugCode.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.drugCode.errors.required" class="invalid-feedback d-block">
                        Drug code is Required
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="drugFormulae"
                    placeholder="Drug Formulae" />
                <div *ngIf="form.drugFormulae.invalid && form.drugFormulae.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.drugFormulae.errors.required" class="invalid-feedback d-block">
                        Drug Formulae is Required
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="manufacturingDate"
                    placeholder="Manufacturing date" />
                <div *ngIf="form.manufacturingDate.invalid && form.manufacturingDate.touched"
                    class="invalid-feedback d-block">
                    <div *ngIf="form.manufacturingDate.errors.required" class="invalid-feedback d-block">
                        Manufacturing date is Required
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="expiryDate" placeholder="Expiry Date" />
                <div *ngIf="form.expiryDate.invalid && form.expiryDate.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.expiryDate.errors.required" class="invalid-feedback d-block">
                        Expiry date is Required
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="batchNo" placeholder="Batch No" />
                <div *ngIf="form.batchNo.invalid && form.batchNo.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.batchNo.errors.required" class="invalid-feedback d-block">
                        Batch No is Required
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <input type="text" class="custom-form-control" formControlName="retailPrice" placeholder="Retail Price" />
                <div *ngIf="form.retailPrice.invalid && form.retailPrice.touched" class="invalid-feedback d-block">
                    <div *ngIf="form.retailPrice.errors.required" class="invalid-feedback d-block">
                        Batch No is Required
                    </div>
                </div>
            </div>

        </div>

        <div class="text-right">
            <button style="margin-top: 18px;" *ngIf="updateId==null" type="submit" [disabled]="loaderOn_Save_Update"
                class="btn blue-color focused-button text-white btn-sm" (click)="save()">
                Save
            </button>
            <button type="submit" style="margin-top: 18px;" *ngIf="updateId!=null" [disabled]="loaderOn_Save_Update"
                class="btn blue-color focused-button text-white btn-sm" (click)="update(updateId)">
                Update
            </button>
        </div>
    </form>
</div>

<div class="row">
    <div class="col-12">
        <app-warning-popups *ngIf="isSucessPopupVisible" [isSuccessPopup]="true" [Message]="message"
            (closePopup)="closeNotification($event)"></app-warning-popups>
        <app-warning-popups *ngIf="isWarningPopupVisible" [isWarningPopup]="true" [Message]="message"
            (closePopup)="closeNotification($event)"></app-warning-popups>
        <app-warning-popups *ngIf="isErrorPopupVisible" [isErrorPopup]="true" [Message]="message"
            (closePopup)="closeNotification($event)"></app-warning-popups>
    </div>
</div>